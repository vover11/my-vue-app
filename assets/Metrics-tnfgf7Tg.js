import{d as N,f as _,m as q,p as F,c as l,o as a,a as s,q as R,n as A,F as c,g as b,j as C,t as r,v as w,e as m}from"./index-CAELrEyA.js";const I={class:"max-w-4xl mx-auto bg-gray-50 p-6 rounded-lg shadow-lg m-4"},P={class:"flex border-b border-gray-200 mb-6"},U={key:0,class:"space-y-6"},O={class:"space-y-4"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},B={key:0,class:"flex flex-col text-gray-600"},D=["onUpdate:modelValue","step"],j={class:"mt-4"},z={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3"},E={class:"text-gray-700 text-sm"},S=["onUpdate:modelValue"],G={class:"space-y-4"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"font-semibold text-gray-600"},K={class:"text-blue-600 font-bold mt-1"},Q={key:1,class:"space-y-6"},W={class:"space-y-4"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={class:"flex flex-col text-gray-600"},Z={class:"font-medium"},k={class:"text-xs text-gray-500 mb-1"},tt=["onUpdate:modelValue","step","min","max"],st={class:"space-y-4"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},et={class:"font-semibold text-gray-600"},lt={class:"text-xs text-gray-500 mb-2"},at={class:"text-blue-600 font-bold mt-1"},rt=N({__name:"Metrics",setup(it){const u=_("financial"),i=_({revenue:0,cost:0,operationalCost:0,initialInvestment:0,discountRate:.1,periods:5,cashFlows:[0,0,0,0,0]}),x=_({mrr:0,numberOfCustomers:0,marketingCosts:0,customerLifetime:12,customerAcquisition:0,conversionRate:.05});q(()=>i.value.periods,n=>{n>i.value.cashFlows.length?i.value.cashFlows=[...i.value.cashFlows,...Array(n-i.value.cashFlows.length).fill(0)]:n<i.value.cashFlows.length&&(i.value.cashFlows=i.value.cashFlows.slice(0,n))});const M=F(()=>{const{revenue:n,cost:e,operationalCost:o,initialInvestment:t,discountRate:d,cashFlows:v}=i.value,f=n-e,g=f-o,y=v.reduce((h,p,L)=>h+p/Math.pow(1+d,L+1),-t),T=(()=>{let h=-t;for(let p=0;p<v.length;p++)if(h+=v[p],h>=0)return p+1;return null})();return{margin:n?f/n*100:0,operationalMargin:n?(n-o)/n*100:0,profitability:g-t,roi:t?(g-t)/t*100:0,npv:y,paybackPeriod:T}}),V=F(()=>{const{mrr:n,numberOfCustomers:e,marketingCosts:o,customerLifetime:t,customerAcquisition:d,conversionRate:v}=x.value,f=n*t,g=e>0?o/e:d;return{ltv:f,cac:g,ltvToCacRatio:g>0?(f/g).toFixed(2):"N/A",conversionRatio:(v*100).toFixed(2),monthlyRecurringRevenue:e*n}});return(n,e)=>(a(),l("div",I,[e[7]||(e[7]=s("h2",{class:"text-2xl font-bold text-center mb-6 text-gray-700"},"Калькулятор бизнес-метрик",-1)),s("div",P,[s("button",{onClick:e[0]||(e[0]=o=>u.value="financial"),class:A([{"border-b-2 border-blue-500 text-blue-600":u.value==="financial","text-gray-500 hover:text-gray-700":u.value!=="financial"},"py-2 px-4 font-medium text-sm focus:outline-none"])}," Финансовые данные ",2),s("button",{onClick:e[1]||(e[1]=o=>u.value="product"),class:A([{"border-b-2 border-blue-500 text-blue-600":u.value==="product","text-gray-500 hover:text-gray-700":u.value!=="product"},"py-2 px-4 font-medium text-sm focus:outline-none"])}," Метрики продукта ",2)]),u.value==="financial"?(a(),l("div",U,[s("div",O,[e[3]||(e[3]=s("h3",{class:"text-lg font-semibold text-gray-700"},"Введите финансовые данные",-1)),s("div",$,[(a(!0),l(c,null,b(i.value,(o,t)=>(a(),l("div",{key:t},[t!=="cashFlows"?(a(),l("label",B,[s("span",null,r(t==="revenue"?"Выручка":t==="cost"?"Себестоимость":t==="operationalCost"?"Операционные затраты":t==="initialInvestment"?"Начальные инвестиции":t==="discountRate"?"Ставка дисконтирования":t==="periods"?"Количество периодов":t)+":",1),C(s("input",{type:"number","onUpdate:modelValue":d=>i.value[t]=d,class:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400",step:t==="discountRate"?"0.01":"1"},null,8,D),[[w,i.value[t]]])])):R("",!0)]))),128))]),s("div",j,[e[2]||(e[2]=s("h4",{class:"font-semibold text-gray-700 mb-2"},"Денежные потоки по периодам:",-1)),s("div",z,[(a(!0),l(c,null,b(i.value.cashFlows,(o,t)=>(a(),l("div",{key:t,class:"flex flex-col"},[s("label",E,"Период "+r(t+1)+":",1),C(s("input",{type:"number","onUpdate:modelValue":d=>i.value.cashFlows[t]=d,class:"p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700",step:"1"},null,8,S),[[w,i.value.cashFlows[t]]])]))),128))])])]),s("div",G,[e[4]||(e[4]=s("h3",{class:"text-lg font-semibold text-gray-700"},"Финансовые показатели",-1)),s("div",H,[(a(!0),l(c,null,b(M.value,(o,t)=>(a(),l("div",{key:t,class:"bg-white p-4 rounded-lg shadow"},[s("p",J,r(t==="margin"?"Маржа":t==="operationalMargin"?"Операционная маржа":t==="profitability"?"Чистая прибыль":t==="roi"?"ROI":t==="npv"?"NPV":t==="paybackPeriod"?"Срок окупаемости":t)+": ",1),s("p",K,[t==="paybackPeriod"?(a(),l(c,{key:0},[m(r(o!==null?`${o} лет`:"Не окупается"),1)],64)):t==="margin"||t==="operationalMargin"||t==="roi"?(a(),l(c,{key:1},[m(r(o!==null?`${o.toFixed(2)}%`:"N/A"),1)],64)):(a(),l(c,{key:2},[m(r(o!==null?o.toFixed(2):"N/A"),1)],64))])]))),128))])])])):R("",!0),u.value==="product"?(a(),l("div",Q,[s("div",W,[e[5]||(e[5]=s("h3",{class:"text-lg font-semibold text-gray-700"},"Введите метрики продукта",-1)),s("div",X,[(a(!0),l(c,null,b(x.value,(o,t)=>(a(),l("div",{key:t,class:"space-y-1"},[s("label",Y,[s("span",Z,r(t==="mrr"?"MRR (ежемесячный доход)":t==="numberOfCustomers"?"Количество клиентов":t==="marketingCosts"?"Затраты на маркетинг":t==="customerLifetime"?"Срок жизни клиента (мес.)":t==="customerAcquisition"?"Затраты на привлечение клиента":"Коэффициент конверсии"),1),s("span",k,r(t==="mrr"?"Средний ежемесячный регулярный доход от подписки":t==="numberOfCustomers"?"Общее количество активных клиентов":t==="marketingCosts"?"Общие расходы на маркетинг за период":t==="customerLifetime"?"Среднее время работы с клиентом (в месяцах)":t==="customerAcquisition"?"Средняя стоимость привлечения одного клиента":"Процент посетителей, становящихся клиентами (от 0 до 1)"),1),C(s("input",{type:"number","onUpdate:modelValue":d=>x.value[t]=d,class:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400",step:t==="conversionRate"?"0.01":"1",min:t==="conversionRate"?"0":void 0,max:t==="conversionRate"?"1":void 0},null,8,tt),[[w,x.value[t]]])])]))),128))])]),s("div",st,[e[6]||(e[6]=s("h3",{class:"text-lg font-semibold text-gray-700"},"Рассчитанные показатели",-1)),s("div",ot,[(a(!0),l(c,null,b(V.value,(o,t)=>(a(),l("div",{key:t,class:"bg-white p-4 rounded-lg shadow"},[s("p",et,r(t==="ltv"?"LTV (Lifetime Value)":t==="cac"?"CAC (Customer Acquisition Cost)":t==="ltvToCacRatio"?"LTV/CAC":t==="conversionRatio"?"Коэффициент конверсии":"MRR (Monthly Recurring Revenue)"),1),s("p",lt,r(t==="ltv"?"Общая прибыль от клиента за всё время сотрудничества":t==="cac"?"Средние затраты на привлечение одного клиента":t==="ltvToCacRatio"?"Соотношение ценности клиента к затратам на его привлечение":t==="conversionRatio"?"Процент конверсии посетителей в клиентов":"Общий ежемесячный доход от всех клиентов"),1),s("p",at,[t==="ltvToCacRatio"?(a(),l(c,{key:0},[m(r(o),1)],64)):t==="conversionRatio"?(a(),l(c,{key:1},[m(r(o)+"% ",1)],64)):t==="monthlyRecurringRevenue"?(a(),l(c,{key:2},[m(r(o.toFixed(2)),1)],64)):(a(),l(c,{key:3},[m(r(typeof o=="number"?`${o.toFixed(2)} ₽`:o),1)],64))])]))),128))])])])):R("",!0)]))}});export{rt as default};
